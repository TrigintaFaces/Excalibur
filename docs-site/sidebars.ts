import type { SidebarsConfig } from '@docusaurus/plugin-content-docs';

/**
 * Sidebars for Excalibur documentation.
 *
 * Hybrid configuration: explicit top-level category groups with
 * autogenerated sub-items within each group. This provides a logical
 * Learn > Build > Optimize > Deploy > Govern > Reference progression
 * while keeping sub-page ordering driven by sidebar_position frontmatter.
 *
 * Sprint 494: S494.1 (hybrid config) + S494.2 (category labels/descriptions)
 */
const sidebars: SidebarsConfig = {
  docsSidebar: [
    // ── Learn ──────────────────────────────────────────────────────────
    {
      type: 'category',
      label: 'Learn',
      description: 'Get started with Dispatch and understand the fundamentals.',
      collapsed: false,
      items: [
        { type: 'doc', id: 'intro' },
        {
          type: 'category',
          label: 'Getting Started',
          link: { type: 'doc', id: 'getting-started/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'getting-started/first-event' },
            { type: 'doc', id: 'getting-started/project-templates' },
            { type: 'doc', id: 'getting-started/samples' },
          ],
        },
        {
          type: 'category',
          label: 'Core Concepts',
          link: { type: 'doc', id: 'core-concepts/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'core-concepts/actions-and-handlers' },
            { type: 'doc', id: 'core-concepts/message-context' },
            { type: 'doc', id: 'core-concepts/results-and-errors' },
            { type: 'doc', id: 'core-concepts/dependency-injection' },
            { type: 'doc', id: 'core-concepts/configuration' },
          ],
        },
        { type: 'doc', id: 'dispatch-vs-excalibur' },
      ],
    },

    // ── Build ──────────────────────────────────────────────────────────
    {
      type: 'category',
      label: 'Build',
      description: 'Handlers, pipelines, middleware, transports, and patterns.',
      collapsed: true,
      items: [
        { type: 'doc', id: 'handlers' },
        {
          type: 'category',
          label: 'Pipeline',
          link: { type: 'doc', id: 'pipeline/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'pipeline/profiles' },
          ],
        },
        {
          type: 'category',
          label: 'Middleware',
          link: { type: 'doc', id: 'middleware/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'middleware/built-in' },
            { type: 'doc', id: 'middleware/custom' },
            { type: 'doc', id: 'middleware/validation' },
            { type: 'doc', id: 'middleware/authorization' },
            { type: 'doc', id: 'middleware/serialization' },
            { type: 'doc', id: 'middleware/serialization-providers' },
          ],
        },
        {
          type: 'category',
          label: 'Transports',
          link: { type: 'doc', id: 'transports/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'transports/choosing-a-transport' },
            { type: 'doc', id: 'transports/in-memory' },
            { type: 'doc', id: 'transports/kafka' },
            { type: 'doc', id: 'transports/rabbitmq' },
            { type: 'doc', id: 'transports/azure-service-bus' },
            { type: 'doc', id: 'transports/aws-sqs' },
            { type: 'doc', id: 'transports/google-pubsub' },
            { type: 'doc', id: 'transports/multi-transport' },
            { type: 'doc', id: 'transports/cron-timer' },
            { type: 'doc', id: 'transports/message-mapping' },
          ],
        },
        {
          type: 'category',
          label: 'Patterns',
          link: { type: 'doc', id: 'patterns/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'patterns/idempotent-consumer' },
            { type: 'doc', id: 'patterns/error-handling' },
            { type: 'doc', id: 'patterns/outbox' },
            { type: 'doc', id: 'patterns/inbox' },
            { type: 'doc', id: 'patterns/claim-check' },
            { type: 'doc', id: 'patterns/dead-letter' },
            { type: 'doc', id: 'patterns/cdc' },
            { type: 'doc', id: 'patterns/routing' },
            { type: 'doc', id: 'patterns/streaming' },
            { type: 'doc', id: 'patterns/jobs' },
          ],
        },
        {
          type: 'category',
          label: 'Domain Modeling',
          link: { type: 'doc', id: 'domain-modeling/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'domain-modeling/aggregates' },
            { type: 'doc', id: 'domain-modeling/entities' },
            { type: 'doc', id: 'domain-modeling/value-objects' },
          ],
        },
        {
          type: 'category',
          label: 'Event Sourcing',
          link: { type: 'doc', id: 'event-sourcing/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'event-sourcing/concepts' },
            { type: 'doc', id: 'event-sourcing/domain-events' },
            { type: 'doc', id: 'event-sourcing/aggregates' },
            { type: 'doc', id: 'event-sourcing/event-store' },
            { type: 'doc', id: 'event-sourcing/event-application-pattern' },
            { type: 'doc', id: 'event-sourcing/repositories' },
            { type: 'doc', id: 'event-sourcing/snapshots' },
            { type: 'doc', id: 'event-sourcing/projections' },
            { type: 'doc', id: 'event-sourcing/materialized-views' },
            { type: 'doc', id: 'event-sourcing/migrations' },
            { type: 'doc', id: 'event-sourcing/versioning' },
            { type: 'doc', id: 'event-sourcing/providers' },
          ],
        },
        {
          type: 'category',
          label: 'CQRS',
          link: { type: 'doc', id: 'cqrs/index' },
          collapsible: true,
          collapsed: true,
          items: [],
        },
        {
          type: 'category',
          label: 'Data Access',
          link: { type: 'doc', id: 'data-access/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'data-access/idb-interface' },
          ],
        },
        {
          type: 'category',
          label: 'Sagas',
          link: { type: 'doc', id: 'sagas/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'sagas/building-your-first-saga' },
            { type: 'doc', id: 'sagas/orchestration-vs-choreography' },
          ],
        },
        {
          type: 'category',
          label: 'Leader Election',
          link: { type: 'doc', id: 'leader-election/index' },
          collapsible: true,
          collapsed: true,
          items: [],
        },
        {
          type: 'category',
          label: 'Data Providers',
          link: { type: 'doc', id: 'data-providers/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'data-providers/sqlserver' },
            { type: 'doc', id: 'data-providers/postgres' },
            { type: 'doc', id: 'data-providers/cosmosdb' },
            { type: 'doc', id: 'data-providers/dynamodb' },
            { type: 'doc', id: 'data-providers/firestore' },
            { type: 'doc', id: 'data-providers/mongodb' },
            { type: 'doc', id: 'data-providers/redis' },
            { type: 'doc', id: 'data-providers/elasticsearch' },
            { type: 'doc', id: 'data-providers/inmemory' },
            { type: 'doc', id: 'data-providers/multi-database' },
          ],
        },
      ],
    },

    // ── Configure ─────────────────────────────────────────────────────
    {
      type: 'category',
      label: 'Configure',
      description: 'Event store, outbox, and snapshot configuration.',
      collapsed: true,
      items: [
        {
          type: 'category',
          label: 'Setup Guides',
          link: { type: 'doc', id: 'configuration/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'configuration/event-store-setup' },
            { type: 'doc', id: 'configuration/outbox-setup' },
            { type: 'doc', id: 'configuration/snapshot-setup' },
          ],
        },
      ],
    },

    // ── Optimize ───────────────────────────────────────────────────────
    {
      type: 'category',
      label: 'Optimize',
      description: 'Performance tuning and source generators for AOT.',
      collapsed: true,
      items: [
        {
          type: 'category',
          label: 'Performance',
          link: { type: 'doc', id: 'performance/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'performance/caching' },
            { type: 'doc', id: 'performance/auto-freeze' },
            { type: 'doc', id: 'performance/messagecontext-best-practices' },
            { type: 'doc', id: 'performance/competitor-comparison' },
          ],
        },
        {
          type: 'category',
          label: 'Source Generators',
          link: { type: 'doc', id: 'source-generators/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'source-generators/getting-started' },
          ],
        },
      ],
    },

    // ── Deploy ─────────────────────────────────────────────────────────
    {
      type: 'category',
      label: 'Deploy',
      description: 'Deployment, observability, operations, and migration.',
      collapsed: true,
      items: [
        {
          type: 'category',
          label: 'Deployment',
          link: { type: 'doc', id: 'deployment/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'deployment/aspnet-core' },
            { type: 'doc', id: 'deployment/minimal-api-bridge' },
            { type: 'doc', id: 'deployment/worker-services' },
            { type: 'doc', id: 'deployment/docker' },
            { type: 'doc', id: 'deployment/kubernetes' },
            { type: 'doc', id: 'deployment/azure-functions' },
            { type: 'doc', id: 'deployment/aws-lambda' },
            { type: 'doc', id: 'deployment/google-cloud-functions' },
            { type: 'doc', id: 'deployment/on-premises' },
            { type: 'doc', id: 'deployment/hosting-providers' },
            { type: 'doc', id: 'deployment/global-exception-handling' },
            { type: 'doc', id: 'deployment/security-best-practices' },
          ],
        },
        {
          type: 'category',
          label: 'Observability',
          link: { type: 'doc', id: 'observability/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'observability/production-observability' },
            { type: 'doc', id: 'observability/metrics-reference' },
            { type: 'doc', id: 'observability/health-checks' },
            { type: 'doc', id: 'observability/azure-monitor' },
            { type: 'doc', id: 'observability/aws-cloudwatch' },
            { type: 'doc', id: 'observability/google-cloud-monitoring' },
            { type: 'doc', id: 'observability/datadog-integration' },
            { type: 'doc', id: 'observability/grafana-dashboards' },
            { type: 'doc', id: 'observability/audit-logging-providers' },
          ],
        },
        {
          type: 'category',
          label: 'Operations',
          link: { type: 'doc', id: 'operations/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'operations/runtime-contract' },
            { type: 'doc', id: 'operations/reliability-guarantees' },
            { type: 'doc', id: 'operations/slo-sli-telemetry' },
            { type: 'doc', id: 'operations/incident-runbooks' },
            { type: 'doc', id: 'operations/resilience' },
            { type: 'doc', id: 'operations/resilience-polly' },
            { type: 'doc', id: 'operations/recovery-runbooks' },
            { type: 'doc', id: 'operations/cdc-troubleshooting' },
            { type: 'doc', id: 'operations/performance-tuning' },
          ],
        },
        {
          type: 'category',
          label: 'Migration',
          link: { type: 'doc', id: 'migration/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'migration/from-mediatr' },
            { type: 'doc', id: 'migration/from-masstransit' },
            { type: 'doc', id: 'migration/from-nservicebus' },
            { type: 'doc', id: 'migration/from-aspnet-eventing-proposal' },
            { type: 'doc', id: 'migration/messagecontext-v1' },
            { type: 'doc', id: 'migration/version-upgrades' },
          ],
        },
      ],
    },

    // ── Test ──────────────────────────────────────────────────────────
    {
      type: 'category',
      label: 'Test',
      description: 'Testing strategies for event-sourced applications.',
      collapsed: true,
      items: [
        {
          type: 'category',
          label: 'Testing',
          link: { type: 'doc', id: 'testing/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'testing/testing-handlers' },
            { type: 'doc', id: 'testing/aggregate-testing' },
            { type: 'doc', id: 'testing/repository-testing' },
            { type: 'doc', id: 'testing/integration-tests' },
          ],
        },
      ],
    },

    // ── Govern ─────────────────────────────────────────────────────────
    {
      type: 'category',
      label: 'Govern',
      description: 'Security, compliance, and legal documentation.',
      collapsed: true,
      items: [
        {
          type: 'category',
          label: 'Security',
          link: { type: 'doc', id: 'security/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'security/authorization' },
            { type: 'doc', id: 'security/audit-logging' },
            { type: 'doc', id: 'security/encryption-architecture' },
            { type: 'doc', id: 'security/encryption-providers' },
            { type: 'doc', id: 'security/threat-model' },
          ],
        },
        {
          type: 'category',
          label: 'Compliance',
          link: { type: 'doc', id: 'compliance/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'compliance/quick-start' },
            { type: 'doc', id: 'compliance/navigation-guide' },
            {
              type: 'category',
              label: 'Checklists',
              link: { type: 'doc', id: 'compliance/checklists/index' },
              collapsible: true,
              collapsed: true,
              items: [
                { type: 'doc', id: 'compliance/checklists/fedramp' },
                { type: 'doc', id: 'compliance/checklists/gdpr' },
                { type: 'doc', id: 'compliance/checklists/soc2' },
                { type: 'doc', id: 'compliance/checklists/hipaa' },
              ],
            },
            {
              type: 'category',
              label: 'FedRAMP',
              link: { type: 'doc', id: 'compliance/fedramp/README' },
              collapsible: true,
              collapsed: true,
              items: [
                { type: 'doc', id: 'compliance/fedramp/CM-8-SBOM' },
              ],
            },
            { type: 'doc', id: 'compliance/audit-logging' },
            { type: 'doc', id: 'compliance/data-masking' },
            { type: 'doc', id: 'compliance/gdpr-erasure' },
          ],
        },
        {
          type: 'category',
          label: 'Legal',
          link: { type: 'doc', id: 'legal/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'legal/compliance-disclaimer' },
          ],
        },
      ],
    },

    // ── Reference ──────────────────────────────────────────────────────
    {
      type: 'category',
      label: 'Reference',
      description: 'Architecture decisions, advanced topics, diagnostics, and support.',
      collapsed: true,
      items: [
        { type: 'doc', id: 'reference/llm-reference' },
        {
          type: 'category',
          label: 'Diagnostics',
          link: { type: 'doc', id: 'diagnostics/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'diagnostics/DISP001' },
            { type: 'doc', id: 'diagnostics/DISP002' },
            { type: 'doc', id: 'diagnostics/DISP003' },
            { type: 'doc', id: 'diagnostics/DISP004' },
          ],
        },
        {
          type: 'category',
          label: 'Architecture',
          link: { type: 'doc', id: 'architecture/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'architecture/dispatch-excalibur-boundary' },
            { type: 'doc', id: 'architecture/capability-ownership-matrix' },
            { type: 'doc', id: 'architecture/capability-migration-map' },
            { type: 'doc', id: 'architecture/vertical-slice-architecture' },
            { type: 'doc', id: 'architecture/messagecontext-design' },
            { type: 'doc', id: 'architecture/messagecontext-items-usage' },
          ],
        },
        {
          type: 'category',
          label: 'Advanced',
          link: { type: 'doc', id: 'advanced/index' },
          collapsible: true,
          collapsed: true,
          items: [
            { type: 'doc', id: 'advanced/testing' },
            { type: 'doc', id: 'advanced/security' },
            { type: 'doc', id: 'advanced/deployment' },
            { type: 'doc', id: 'advanced/source-generators' },
            { type: 'doc', id: 'advanced/native-aot' },
            { type: 'doc', id: 'advanced/viewing-generated-code' },
          ],
        },
        { type: 'doc', id: 'support' },
      ],
    },
  ],
};

export default sidebars;
