{
  "Persistence": {
    "DefaultProvider": "primary",
    "GlobalOptions": {
      "EnableQueryCaching": true,
      "EnableTracing": true,
      "EnableMetrics": true,
      "EnableSensitiveDataLogging": false,
      "DefaultCommandTimeout": 30,
      "DefaultIsolationLevel": "ReadCommitted",
      "EnableAutoRetry": true,
      "MaxRetryAttempts": 3,
      "RetryDelayMilliseconds": 100
    },
    "Providers": {
      "primary": {
        "Type": "SqlServer",
        "ConnectionString": "Server=localhost;Database=ExcaliburDb;Integrated Security=true;TrustServerCertificate=true",
        "IsReadOnly": false,
        "MaxPoolSize": 100,
        "ConnectionTimeout": 30,
        "CommandTimeout": 30,
        "EnablePooling": true,
        "RetryConfiguration": {
          "Enabled": true,
          "MaxAttempts": 3,
          "InitialDelayMilliseconds": 100,
          "MaxDelayMilliseconds": 30000,
          "BackoffMultiplier": 2.0,
          "UseJitter": true
        }
      },
      "replica1": {
        "Type": "SqlServer",
        "ConnectionString": "Server=replica1.local;Database=ExcaliburDb;Integrated Security=true;TrustServerCertificate=true",
        "IsReadOnly": true,
        "MaxPoolSize": 50,
        "ConnectionTimeout": 30,
        "CommandTimeout": 30,
        "EnablePooling": true
      },
      "replica2": {
        "Type": "SqlServer",
        "ConnectionString": "Server=replica2.local;Database=ExcaliburDb;Integrated Security=true;TrustServerCertificate=true",
        "IsReadOnly": true,
        "MaxPoolSize": 50,
        "ConnectionTimeout": 30,
        "CommandTimeout": 30,
        "EnablePooling": true
      },
      "postgres": {
        "Type": "PostgreSQL",
        "ConnectionString": "Host=localhost;Database=excalibur_db;Username=excalibur;Password=secret",
        "IsReadOnly": false,
        "MaxPoolSize": 100,
        "ConnectionTimeout": 30,
        "CommandTimeout": 30,
        "EnablePooling": true
      },
      "mongodb": {
        "Type": "MongoDB",
        "ConnectionString": "mongodb://localhost:27017/excalibur",
        "IsReadOnly": false,
        "MaxPoolSize": 100,
        "ConnectionTimeout": 30,
        "CommandTimeout": 30,
        "EnablePooling": true
      }
    },
    "ReadWriteSplit": {
      "PrimaryProvider": "primary",
      "ReadProviders": [ "replica1", "replica2" ],
      "Strategy": "RoundRobin",
      "FallbackToPrimary": true
    }
  }
}