// PerformanceComparison Example
// Demonstrates performance characteristics of each delivery guarantee level.

using Excalibur.Dispatch.Options.Delivery;

Console.WriteLine("Delivery Guarantee Performance Comparison");
Console.WriteLine("==========================================");
Console.WriteLine();
Console.WriteLine("This example explains the performance trade-offs between delivery guarantees.");
Console.WriteLine();
Console.WriteLine("Performance Characteristics:");
Console.WriteLine("----------------------------");
Console.WriteLine();
Console.WriteLine("| Level                       | DB Round-Trips | Throughput | Failure Window |");
Console.WriteLine("|-----------------------------|----------------|------------|----------------|");
Console.WriteLine("| AtLeastOnce                 | 1 per batch    | Highest    | Entire batch   |");
Console.WriteLine("| MinimizedWindow             | N per batch    | ~50% lower | Single message |");
Console.WriteLine("| TransactionalWhenApplicable | 1 per message  | Variable   | Zero (atomic)  |");
Console.WriteLine();
Console.WriteLine("Benchmark Results (from Sprint 222):");
Console.WriteLine("-------------------------------------");
Console.WriteLine();
Console.WriteLine("| Scenario      | AtLeastOnce | MinimizedWindow | Transactional |");
Console.WriteLine("|---------------|-------------|-----------------|---------------|");
Console.WriteLine("| 100 messages  | 12ms        | 89ms            | 156ms         |");
Console.WriteLine("| 1000 messages | 45ms        | 823ms           | 1,450ms       |");
Console.WriteLine();
Console.WriteLine("Decision Matrix:");
Console.WriteLine("-----------------");
Console.WriteLine();
Console.WriteLine("Choose AtLeastOnce when:");
Console.WriteLine("  - Handlers are idempotent");
Console.WriteLine("  - High throughput is priority");
Console.WriteLine("  - Inbox deduplication is available");
Console.WriteLine();
Console.WriteLine("Choose MinimizedWindow when:");
Console.WriteLine("  - Duplicates have significant impact");
Console.WriteLine("  - Financial or audit scenarios");
Console.WriteLine("  - Can accept lower throughput");
Console.WriteLine();
Console.WriteLine("Choose TransactionalWhenApplicable when:");
Console.WriteLine("  - Zero duplicates required");
Console.WriteLine("  - Same database for outbox and inbox");
Console.WriteLine("  - SQL Server is the backing store");
Console.WriteLine();
Console.WriteLine("Configuration Example:");
Console.WriteLine("----------------------");
Console.WriteLine();
Console.WriteLine("```csharp");
Console.WriteLine("services.Configure<OutboxOptions>(options =>");
Console.WriteLine("{");
Console.WriteLine($"    options.DeliveryGuarantee = OutboxDeliveryGuarantee.{nameof(OutboxDeliveryGuarantee.AtLeastOnce)};");
Console.WriteLine("    options.BatchSize = 100;");
Console.WriteLine("    options.PollingInterval = TimeSpan.FromSeconds(5);");
Console.WriteLine("});");
Console.WriteLine("```");
Console.WriteLine();
Console.WriteLine("For detailed benchmarks, see:");
Console.WriteLine("  - benchmarks/Excalibur.Dispatch.Benchmarks/Delivery/DeliveryGuaranteeBenchmarks.cs");
